<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="mohan">





<title>目标是毒奶牧高手 | nahom&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">nahom&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">nahom&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">目标是毒奶牧高手</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">mohan</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">July 14, 2025&nbsp;&nbsp;2:07:48</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h3 id="我要成为毒奶牧高手！（Easy-Version）"><a href="#我要成为毒奶牧高手！（Easy-Version）" class="headerlink" title="我要成为毒奶牧高手！（Easy Version）"></a>我要成为毒奶牧高手！（Easy Version）</h3><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>【L2】传说是一款脍炙人口的卡牌游戏，有一个卡组名为毒奶牧，其核心卡牌名为 “枯萎之影” 拥有特殊的攻击机制，请计算最少需要多少次治疗操作才能击杀目标。</p>
<p>具体机制如下：</p>
<ul>
<li>枯萎之影的攻击力为 7 点。</li>
<li>目标拥有护盾值（s）和生命值（b），其中生命值上限为 30 点。</li>
<li>每次治疗+攻击的流程为：<ol>
<li>先计算本次治疗的实际有效量：基于当前生命值（攻击前的生命值），治疗量固定为 3 点，但不能超过生命值上限 30 点（即实际治疗量 &#x3D; min (3, 30 - 攻击前生命值)）。</li>
<li>枯萎之影进行攻击，优先消耗护盾值，护盾不足时剩余伤害直接扣除生命值。</li>
<li>若攻击后生命值 ≤ 0，则目标被击杀，本次治疗操作后的治疗效果不结算。</li>
<li>若攻击后生命值 &gt; 0，则结算步骤 1 中计算的实际治疗量，增加到生命值中（不超过 30）。</li>
</ol>
</li>
</ul>
<p>给定目标的初始护盾值 s 和初始生命值 b，请问最少需要进行多少次治疗操作，才能让枯萎之影的攻击使目标生命值 ≤ 0（即击杀目标）？</p>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行输入一个整数 T（1 ≤ T ≤ 1e8），表示测试数据的组数。<br>每组测试数据输入两个整数 s 和 b，其中：</p>
<ul>
<li>s 为初始护盾值（0 ≤ s ≤1e9）</li>
<li>b 为初始生命值（1 ≤ b ≤ 30）</li>
</ul>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>对于每组测试数据，输出一个整数，表示最少需要的治疗次数。</p>
<h4 id="示例输入"><a href="#示例输入" class="headerlink" title="示例输入"></a>示例输入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">0 7</span><br><span class="line">0 8</span><br><span class="line">7 1</span><br><span class="line">14 30</span><br><span class="line">1000000000 30</span><br></pre></td></tr></table></figure>

<h4 id="示例输出"><a href="#示例输出" class="headerlink" title="示例输出"></a>示例输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">2</span><br><span class="line">8</span><br><span class="line">142857149</span><br></pre></td></tr></table></figure>

<p>————————————————————我是分割线———————————————————</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<p>下面是题解</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<p>————————————————————我是分割线———————————————————</p>
<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><h4 id="模拟法"><a href="#模拟法" class="headerlink" title="模拟法"></a>模拟法</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="type">int</span> s, b;  <span class="comment">// s: 护盾值, b: 生命值</span></span><br><span class="line">        cin &gt;&gt; s &gt;&gt; b;</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;  <span class="comment">// 治疗次数</span></span><br><span class="line">        <span class="keyword">while</span> (b &gt; <span class="number">0</span>) &#123;  <span class="comment">// 只要生命值&gt;0就继续循环</span></span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="type">int</span> h = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - b);  <span class="comment">// 计算本次治疗量</span></span><br><span class="line">            <span class="type">int</span> d = <span class="built_in">min</span>(<span class="number">7</span>, s);  <span class="comment">// 计算护盾承受的伤害</span></span><br><span class="line">            s -= d;  <span class="comment">// 更新护盾值</span></span><br><span class="line">            b -= <span class="number">7</span> - d;  <span class="comment">// 更新生命值(总伤害7 - 护盾承受的伤害)</span></span><br><span class="line">            <span class="keyword">if</span> (b &gt; <span class="number">0</span>) b += h;  <span class="comment">// 若攻击后未死亡，结算治疗效果</span></span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>O</strong> <strong>(T*s)</strong></p>
<h4 id="优化版"><a href="#优化版" class="headerlink" title="优化版"></a>优化版</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> s, b;</span><br><span class="line">        cin &gt;&gt; s &gt;&gt; b;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> k1 = (s + <span class="number">6</span>) / <span class="number">7</span>;  <span class="comment">// 向上取整计算护盾消耗次数</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> full_attacks = (s % <span class="number">7</span> == <span class="number">0</span>) ? k1 : k1 - <span class="number">1</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> new_b = b;</span><br><span class="line">        <span class="type">bool</span> killed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 计算护盾耗尽前的生命值变化</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> i = <span class="number">0</span>; i &lt; full_attacks; i++) &#123;</span><br><span class="line">    	<span class="type">long</span> <span class="type">long</span> h = <span class="built_in">min</span>(<span class="number">3LL</span>, <span class="number">30LL</span> - new_b);  <span class="comment">// 治疗量</span></span><br><span class="line">    	<span class="type">long</span> <span class="type">long</span> d = <span class="built_in">min</span>(<span class="number">7LL</span>, s);             <span class="comment">// 护盾承受的伤害</span></span><br><span class="line">    	new_b -= (<span class="number">7</span> - d);                      <span class="comment">// 攻击后的生命值变化</span></span><br><span class="line">    	<span class="keyword">if</span> (new_b &lt;= <span class="number">0</span>) &#123;                      <span class="comment">// 若生命值已降至0，直接输出结果</span></span><br><span class="line">        	cout &lt;&lt; i + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">        	killed = <span class="literal">true</span>;</span><br><span class="line">        	<span class="keyword">break</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	new_b += h;                            <span class="comment">// 结算治疗（攻击后未死亡）</span></span><br><span class="line">    	s -= d;                                <span class="comment">// 更新护盾值</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (killed) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理最后一次攻击（可能护盾已耗尽）</span></span><br><span class="line">        <span class="keyword">if</span> (s &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> h = <span class="built_in">min</span>(<span class="number">3LL</span>, <span class="number">30LL</span> - new_b);</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> d = <span class="built_in">min</span>(<span class="number">7LL</span>, s);</span><br><span class="line">            new_b -= (<span class="number">7</span> - d);</span><br><span class="line">            <span class="keyword">if</span> (new_b &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                cout &lt;&lt; k1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            new_b += h;</span><br><span class="line">            s -= d;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 护盾已耗尽，计算剩余攻击次数</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> k2 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> current_b = new_b;</span><br><span class="line">        <span class="keyword">while</span> (current_b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            k2++;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> h = <span class="built_in">min</span>(<span class="number">3LL</span>, <span class="number">30LL</span> - current_b);</span><br><span class="line">            current_b -= <span class="number">7</span>;</span><br><span class="line">            <span class="keyword">if</span> (current_b &gt; <span class="number">0</span>) current_b += h;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; k1 + k2 &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>O</strong> <strong>(T)</strong></p>
<p>————————————————————我是分割线———————————————————</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<p>下面是困难版本</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<p>————————————————————我是分割线———————————————————</p>
<h3 id="我要成为毒奶牧高手！（Hard-Version）"><a href="#我要成为毒奶牧高手！（Hard-Version）" class="headerlink" title="我要成为毒奶牧高手！（Hard Version）"></a>我要成为毒奶牧高手！（Hard Version）</h3><h4 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h4><p>【L2】传说是一款脍炙人口的卡牌游戏，有一个卡组名为毒奶牧，其核心卡牌名为 “枯萎之影” 拥有特殊的攻击机制，请计算最少需要多少次治疗操作才能击杀目标。</p>
<ul>
<li>存在 <code>n</code> 个枯萎之影（<code>n=1</code> 或 <code>n=2</code>），若触发 “观鸟” 效果，单个枯萎之影的攻击力为 9 点；否则为 7 点。总伤害为单个伤害 × <code>n</code>。</li>
<li>目标拥有护盾值（<code>s</code>）和生命值（<code>b</code>），其中生命值上限为 30 点。</li>
<li>每次治疗 + 攻击的流程为：<ol>
<li>先选择本次治疗方式（二选一，特殊治疗仅可使用一次）：<ul>
<li>普通治疗：计算实际有效量为 min (3, 30 - 攻击前生命值)。</li>
<li>特殊治疗（仅可使用一次）：计算实际有效量为 min (2, 30 - 攻击前生命值)。</li>
</ul>
</li>
<li>所有枯萎之影合计攻击，优先消耗护盾值，护盾不足时剩余伤害直接扣除生命值。</li>
<li>若攻击后生命值 ≤ 0，则目标被击杀，本次治疗操作后的治疗效果不结算。</li>
<li>若攻击后生命值 &gt; 0，则结算步骤 1 中选择的治疗方式对应的实际治疗量，增加到生命值中（不超过 30）。</li>
</ol>
</li>
</ul>
<p>给定目标的初始护盾值 <code>s</code>、初始生命值 <code>b</code>、枯萎之影数量 <code>n</code>（1 或 2）、是否触发观鸟效果 <code>f</code>（0 或 1，1 表示单个伤害为 9，0 表示为 7），请问最少需要进行多少次治疗操作，才能使目标生命值 ≤ 0（即击杀目标）？</p>
<h4 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行输入一个整数 <code>T</code>（1 ≤ T ≤ 1e5），表示测试数据的组数。<br>每组测试数据输入四个整数 <code>s, b, n, f</code>，其中：</p>
<ul>
<li><code>s</code> 为初始护盾值（0 ≤ s ≤ 1e9）</li>
<li><code>b</code> 为初始生命值（1 ≤ b ≤ 30）</li>
<li><code>n</code> 为枯萎之影数量（1 或 2）</li>
<li><code>f</code> 为观鸟效果（0 或 1，1 表示单个伤害为 9，0 表示为 7）</li>
</ul>
<h4 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h4><p>对于每组测试数据，输出一个整数，表示最少需要的治疗次数。</p>
<h4 id="示例输入-1"><a href="#示例输入-1" class="headerlink" title="示例输入"></a>示例输入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">0 5 1 0</span><br><span class="line">3 9 1 0</span><br><span class="line">0 8 1 1</span><br><span class="line">20 30 2 1</span><br><span class="line">100 1 1 0</span><br></pre></td></tr></table></figure>

<h4 id="示例输出-1"><a href="#示例输出-1" class="headerlink" title="示例输出"></a>示例输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">21</span><br></pre></td></tr></table></figure>

<h4 id="示例输入-2"><a href="#示例输入-2" class="headerlink" title="示例输入"></a>示例输入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">5 7 1 0</span><br><span class="line">0 30 1 0</span><br><span class="line">18 15 2 1</span><br><span class="line">0 10 1 0</span><br><span class="line">0 13 1 0</span><br><span class="line">100 5 1 0</span><br></pre></td></tr></table></figure>

<h4 id="示例输出-2"><a href="#示例输出-2" class="headerlink" title="示例输出"></a>示例输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">6</span><br><span class="line">2</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">21</span><br></pre></td></tr></table></figure>

<h4 id="暴力法"><a href="#暴力法" class="headerlink" title="暴力法"></a>暴力法</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 向上取整：ceil(a / b)</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">ceil_div</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b - <span class="number">1</span>) / b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 计算无护盾阶段的步数（已知当前生命值，返回从当前步开始的击杀步数）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">simulate_no_shield</span><span class="params">(<span class="type">int</span> health, <span class="type">int</span> d, <span class="type">bool</span>&amp; used_special, <span class="type">int</span> special_pos, <span class="type">int</span> current_step)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> steps = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> h = health;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        steps++;</span><br><span class="line">        <span class="type">int</span> current_total_step = current_step + steps;</span><br><span class="line">        <span class="comment">// 计算本次治疗量</span></span><br><span class="line">        <span class="type">int</span> heal;</span><br><span class="line">        <span class="keyword">if</span> (current_total_step == special_pos &amp;&amp; !used_special) &#123;</span><br><span class="line">            heal = <span class="built_in">min</span>(<span class="number">2</span>, <span class="number">30</span> - h);</span><br><span class="line">            used_special = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            heal = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - h);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 攻击（无护盾，直接扣血）</span></span><br><span class="line">        h -= d;</span><br><span class="line">        <span class="keyword">if</span> (h &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 若使用了特殊治疗或不使用，返回步数</span></span><br><span class="line">            <span class="keyword">if</span> (special_pos == <span class="number">-1</span> || used_special) <span class="keyword">return</span> steps;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> INT_MAX;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 治疗生效</span></span><br><span class="line">        h = <span class="built_in">min</span>(h + heal, <span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 模拟函数：special_pos=-1表示不使用特殊治疗，否则为使用步数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">simulate</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> b, <span class="type">int</span> d, <span class="type">int</span> special_pos)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (d == <span class="number">0</span>) <span class="keyword">return</span> INT_MAX; <span class="comment">// 无效伤害</span></span><br><span class="line">    <span class="comment">// 1. 计算护盾阶段参数</span></span><br><span class="line">    <span class="type">int</span> m = (s == <span class="number">0</span>) ? <span class="number">0</span> : <span class="built_in">ceil_div</span>(s, d); <span class="comment">// 消耗护盾总步数</span></span><br><span class="line">    <span class="type">bool</span> used_special = (special_pos == <span class="number">-1</span>); <span class="comment">// 是否使用特殊治疗</span></span><br><span class="line">    <span class="type">int</span> current_step = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> h = b; <span class="comment">// 当前生命值</span></span><br><span class="line">    <span class="comment">// 2. 处理护盾阶段（前m-1步）</span></span><br><span class="line">    <span class="keyword">if</span> (m &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> steps_shield = m - <span class="number">1</span>; <span class="comment">// 护盾阶段前m-1步</span></span><br><span class="line">        <span class="comment">// 计算前m-1步的生命值（普通治疗为主，除非特殊治疗在这阶段）</span></span><br><span class="line">        <span class="keyword">if</span> (special_pos &lt;= steps_shield &amp;&amp; special_pos != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 特殊治疗在护盾阶段的前m-1步内：前k-1步普通治疗，第k步特殊治疗</span></span><br><span class="line">            <span class="type">int</span> k = special_pos;</span><br><span class="line">            <span class="keyword">if</span> (k &lt; <span class="number">1</span> || k &gt; steps_shield) &#123;</span><br><span class="line">                <span class="comment">// 特殊治疗位置无效（不在前m-1步），按普通治疗计算</span></span><br><span class="line">                h = <span class="built_in">min</span>(h + <span class="number">3</span> * steps_shield, <span class="number">30</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 前k-1步普通治疗，第k步特殊治疗，剩余steps_shield - k步普通治疗</span></span><br><span class="line">                <span class="type">int</span> add = <span class="number">3</span> * (k - <span class="number">1</span>) + <span class="number">2</span> + <span class="number">3</span> * (steps_shield - k);</span><br><span class="line">                h = <span class="built_in">min</span>(h + add, <span class="number">30</span>);</span><br><span class="line">                used_special = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 前m-1步均为普通治疗</span></span><br><span class="line">            h = <span class="built_in">min</span>(h + <span class="number">3</span> * steps_shield, <span class="number">30</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        current_step = steps_shield; <span class="comment">// 已完成steps_shield步</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3. 处理第m步（护盾耗尽步）</span></span><br><span class="line">    <span class="keyword">if</span> (m &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        current_step++; <span class="comment">// 进入第m步</span></span><br><span class="line">        <span class="comment">// 计算第m步攻击的剩余伤害（护盾耗尽后作用于生命值）</span></span><br><span class="line">        <span class="type">int</span> shield_remaining = s - (m - <span class="number">1</span>) * d; <span class="comment">// 第m步前剩余护盾</span></span><br><span class="line">        <span class="type">int</span> damage_to_health = d - shield_remaining; <span class="comment">// 护盾耗尽后扣血</span></span><br><span class="line">        <span class="comment">// 第m步的治疗量</span></span><br><span class="line">        <span class="type">int</span> heal;</span><br><span class="line">        <span class="keyword">if</span> (current_step == special_pos &amp;&amp; !used_special) &#123;</span><br><span class="line">            heal = <span class="built_in">min</span>(<span class="number">2</span>, <span class="number">30</span> - h);</span><br><span class="line">            used_special = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            heal = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - h);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 第m步攻击后生命值</span></span><br><span class="line">        <span class="type">int</span> h_after_attack = h - damage_to_health;</span><br><span class="line">        <span class="keyword">if</span> (h_after_attack &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 第m步直接击杀</span></span><br><span class="line">            <span class="keyword">if</span> (special_pos == <span class="number">-1</span> || used_special) <span class="keyword">return</span> current_step;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> INT_MAX;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 第m步治疗生效（未击杀）</span></span><br><span class="line">        h = <span class="built_in">min</span>(h_after_attack + heal, <span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4. 进入无护盾阶段，模拟剩余步骤</span></span><br><span class="line">    <span class="type">int</span> steps_no_shield = <span class="built_in">simulate_no_shield</span>(h, d, used_special, special_pos, current_step);</span><br><span class="line">    <span class="keyword">if</span> (steps_no_shield == INT_MAX) <span class="keyword">return</span> INT_MAX;</span><br><span class="line">    <span class="keyword">return</span> current_step + steps_no_shield;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="type">int</span> s, b, n, f;</span><br><span class="line">        cin &gt;&gt; s &gt;&gt; b &gt;&gt; n &gt;&gt; f;</span><br><span class="line">        <span class="type">int</span> d = (f ? <span class="number">9</span> : <span class="number">7</span>) * n;</span><br><span class="line">        <span class="comment">// 不使用特殊治疗</span></span><br><span class="line">        <span class="type">int</span> min_steps = <span class="built_in">simulate</span>(s, b, d, <span class="number">-1</span>);</span><br><span class="line">        <span class="comment">// 枚举特殊治疗位置（范围：1到m+200，m为护盾阶段步数，200为无护盾阶段冗余）</span></span><br><span class="line">        <span class="type">int</span> m = (s == <span class="number">0</span>) ? <span class="number">0</span> : <span class="built_in">ceil_div</span>(s, d);</span><br><span class="line">        <span class="type">int</span> max_enum = m + <span class="number">200</span>; <span class="comment">// 限制枚举范围，避免无效计算</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= max_enum; k++) &#123;</span><br><span class="line">            <span class="type">int</span> steps = <span class="built_in">simulate</span>(s, b, d, k);</span><br><span class="line">            <span class="keyword">if</span> (steps &lt; min_steps) &#123;</span><br><span class="line">                min_steps = steps;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; min_steps &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>O(T * m )</strong></p>
<h4 id="dp优化版"><a href="#dp优化版" class="headerlink" title="dp优化版"></a>dp优化版</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dp_norm_list;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dp_used_list;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; pers = &#123;<span class="number">7</span>, <span class="number">9</span>, <span class="number">14</span>, <span class="number">18</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> idx = <span class="number">0</span>; idx &lt; <span class="number">4</span>; idx++) &#123;</span><br><span class="line">        <span class="type">int</span> per = pers[idx];</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp_norm</span><span class="params">(<span class="number">31</span>, INT_MAX)</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp_used</span><span class="params">(<span class="number">31</span>, INT_MAX)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> h = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - i);</span><br><span class="line">            <span class="type">int</span> after_attack = i - per;</span><br><span class="line">            <span class="keyword">if</span> (after_attack &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dp_used[i] = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> next_state = after_attack + h;</span><br><span class="line">                <span class="keyword">if</span> (next_state &gt; <span class="number">30</span>) next_state = <span class="number">30</span>;</span><br><span class="line">                dp_used[i] = <span class="number">1</span> + dp_used[next_state];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> option1, option2;</span><br><span class="line">            <span class="type">int</span> h1 = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - i);</span><br><span class="line">            <span class="type">int</span> after_attack1 = i - per;</span><br><span class="line">            <span class="keyword">if</span> (after_attack1 &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                option1 = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> next_state1 = after_attack1 + h1;</span><br><span class="line">                <span class="keyword">if</span> (next_state1 &gt; <span class="number">30</span>) next_state1 = <span class="number">30</span>;</span><br><span class="line">                option1 = <span class="number">1</span> + dp_norm[next_state1];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> h2 = <span class="built_in">min</span>(<span class="number">2</span>, <span class="number">30</span> - i);</span><br><span class="line">            <span class="type">int</span> after_attack2 = i - per;</span><br><span class="line">            <span class="keyword">if</span> (after_attack2 &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                option2 = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> next_state2 = after_attack2 + h2;</span><br><span class="line">                <span class="keyword">if</span> (next_state2 &gt; <span class="number">30</span>) next_state2 = <span class="number">30</span>;</span><br><span class="line">                option2 = <span class="number">1</span> + dp_used[next_state2];</span><br><span class="line">            &#125;</span><br><span class="line">            dp_norm[i] = <span class="built_in">min</span>(option1, option2);</span><br><span class="line">        &#125;</span><br><span class="line">        dp_norm_list.<span class="built_in">push_back</span>(dp_norm);</span><br><span class="line">        dp_used_list.<span class="built_in">push_back</span>(dp_used);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> s, b;</span><br><span class="line">        <span class="type">int</span> n, f;</span><br><span class="line">        cin &gt;&gt; s &gt;&gt; b &gt;&gt; n &gt;&gt; f;</span><br><span class="line">        <span class="type">int</span> per;</span><br><span class="line">        <span class="type">int</span> idx_per;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span> &amp;&amp; f == <span class="number">0</span>) &#123;</span><br><span class="line">            per = <span class="number">7</span>;</span><br><span class="line">            idx_per = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">1</span> &amp;&amp; f == <span class="number">1</span>) &#123;</span><br><span class="line">            per = <span class="number">9</span>;</span><br><span class="line">            idx_per = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">2</span> &amp;&amp; f == <span class="number">0</span>) &#123;</span><br><span class="line">            per = <span class="number">14</span>;</span><br><span class="line">            idx_per = <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            per = <span class="number">18</span>;</span><br><span class="line">            idx_per = <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;&amp; dp_norm = dp_norm_list[idx_per];</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;&amp; dp_used = dp_used_list[idx_per];</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> k1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (s &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            k1 = (s + per - <span class="number">1</span>) / per;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (k1 == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> total0, total2;</span><br><span class="line">            <span class="type">int</span> h0 = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - (<span class="type">int</span>)b);</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> after_attack = b - per;</span><br><span class="line">            <span class="keyword">if</span> (after_attack &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                total0 = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                total0 = <span class="number">1</span> + dp_norm[after_attack + h0];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> h2 = <span class="built_in">min</span>(<span class="number">2</span>, <span class="number">30</span> - (<span class="type">int</span>)b);</span><br><span class="line">            after_attack = b - per;</span><br><span class="line">            <span class="keyword">if</span> (after_attack &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                total2 = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                total2 = <span class="number">1</span> + dp_used[after_attack + h2];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> ans = <span class="built_in">min</span>(total0, total2);</span><br><span class="line">            cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> total0 = LLONG_MAX;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> total1 = LLONG_MAX;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> total2 = LLONG_MAX;</span><br><span class="line"></span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> life0 = b + <span class="number">3</span> * (k1 - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (life0 &gt; <span class="number">30</span>) life0 = <span class="number">30</span>;</span><br><span class="line">            <span class="type">int</span> heal0 = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - (<span class="type">int</span>)life0);</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> damage_in_last = k1 * (<span class="type">long</span> <span class="type">long</span>)per - s;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> after_attack0 = life0 - damage_in_last;</span><br><span class="line">            <span class="keyword">if</span> (after_attack0 &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                total0 = k1;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">long</span> <span class="type">long</span> next_state0 = after_attack0 + heal0;</span><br><span class="line">                <span class="keyword">if</span> (next_state0 &gt; <span class="number">30</span>) next_state0 = <span class="number">30</span>;</span><br><span class="line">                total0 = k1 + dp_norm[next_state0];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> life1 = life0;</span><br><span class="line">            <span class="type">int</span> heal1 = <span class="built_in">min</span>(<span class="number">2</span>, <span class="number">30</span> - (<span class="type">int</span>)life1);</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> after_attack1 = life1 - damage_in_last;</span><br><span class="line">            <span class="keyword">if</span> (after_attack1 &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                total1 = k1;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">long</span> <span class="type">long</span> next_state1 = after_attack1 + heal1;</span><br><span class="line">                <span class="keyword">if</span> (next_state1 &gt; <span class="number">30</span>) next_state1 = <span class="number">30</span>;</span><br><span class="line">                total1 = k1 + dp_used[next_state1];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (k1 &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="type">long</span> life2 = b + <span class="number">3</span> * (k1 - <span class="number">1</span>) - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (life2 &gt; <span class="number">30</span>) life2 = <span class="number">30</span>;</span><br><span class="line">                <span class="type">int</span> heal2 = <span class="built_in">min</span>(<span class="number">3</span>, <span class="number">30</span> - (<span class="type">int</span>)life2);</span><br><span class="line">                <span class="type">long</span> <span class="type">long</span> after_attack2 = life2 - damage_in_last;</span><br><span class="line">                <span class="keyword">if</span> (after_attack2 &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    total2 = k1;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">long</span> <span class="type">long</span> next_state2 = after_attack2 + heal2;</span><br><span class="line">                    <span class="keyword">if</span> (next_state2 &gt; <span class="number">30</span>) next_state2 = <span class="number">30</span>;</span><br><span class="line">                    total2 = k1 + dp_used[next_state2];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> ans = <span class="built_in">min</span>(total0, <span class="built_in">min</span>(total1, total2));</span><br><span class="line">            cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过<strong>预处理 DP 表</strong>（覆盖 4 种固定伤害、1-30 生命值的两种状态），公式直接计算护盾阶段状态，无护盾阶段直接查表得结果，省去实时模拟，将单测试用例计算压至 O (1)，大幅优化效率。<strong>O（T）</strong></p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>mohan</span>
                    </p>
                
                
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span><strong>Learning</strong> is a kind of <strong>FAITH</strong>!</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%AE%97%E6%B3%95/"># 算法</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2025/07/15/%E7%89%9B%E5%AE%A27-15/">牛客7.15</a>
            
            
            <a class="next" rel="next" href="/2025/07/08/algorithm/">algorithm</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© mohan | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>